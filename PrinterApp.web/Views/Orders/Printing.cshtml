@model PrinterApp.Models.ViewModels.OrderStage4ViewModel

@{
    ViewData["Title"] = "ุทุจุงุนุฉ ุงูุทูุจ";
}

<div class="content-container">
    <div class="page-header">
        <h2>๐จ๏ธ ุทุจุงุนุฉ ุงูุทูุจ - @Model.OrderNumber</h2>
        <a asp-action="PrintingList" class="btn-secondary-custom">โ ุนูุฏุฉ</a>
    </div>

    @if (TempData["Success"] != null)
    {
        <div class="alert-custom alert-success-custom">โ @TempData["Success"]</div>
    }

    <div class="card-custom">
        <div style="padding: 30px;">
            <!-- Complete Order Info -->
            <div style="background: var(--input-bg); padding: 25px; border-radius: var(--border-radius); margin-bottom: 25px;">
                <h4 style="color: var(--primary-color); margin-bottom: 20px;">๐ ูุนูููุงุช ุงูุทูุจ ุงููุงููุฉ</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <strong>ุงูุนููู:</strong> @Model.CustomerName<br />
                        <small style="color: var(--medium-gray);">๐ @Model.CustomerPhone</small>
                    </div>
                    <div><strong>ุงูููุฑุฏ:</strong> @Model.SupplierName</div>
                    <div><strong>ุงูููุชุฌ:</strong> @Model.ProductName</div>
                    <div><strong>ุงููููุฉ:</strong> <span style="font-size: 18px; font-weight: bold; color: var(--primary-color);">@Model.Quantity</span></div>
                    <div><strong>ุงูููุงุณ:</strong> @Model.Length ร @Model.Width ุณู</div>
                    <div><strong>ููุน ุงูุฎุงู:</strong> @Model.RawMaterialName</div>
                    <div><strong>ุงุชุฌุงู ุงูุฑูู:</strong> @Model.RollDirectionNumber</div>
                    <div><strong>ุงููุงูููุฉ:</strong> @Model.MachineName</div>
                    <div><strong>ุงูููุจ:</strong> @Model.CoreName</div>
                    <div><strong>ุงูุณูููุฉ:</strong> @Model.KnifeName</div>
                    <div><strong>ุงููุฑุชูู:</strong> @(Model.CartonName ?? "ุบูุฑ ูุญุฏุฏ")</div>
                    <div><strong>ุงููุงูุจ:</strong> @(Model.MoldName ?? "ุบูุฑ ูุญุฏุฏ")</div>
                </div>
            </div>

            <!-- Notes -->
            @if (!string.IsNullOrEmpty(Model.OrderNotes) || !string.IsNullOrEmpty(Model.ReviewNotes) || !string.IsNullOrEmpty(Model.ManufacturingNotes))
            {
                <div style="background: var(--input-bg); padding: 20px; border-radius: var(--border-radius); margin-bottom: 25px;">
                    <h4 style="color: var(--primary-color); margin-bottom: 15px;">๐ ุงูููุงุญุธุงุช</h4>
                    @if (!string.IsNullOrEmpty(Model.OrderNotes))
                    {
                        <div style="margin-bottom: 10px;">
                            <strong>ููุงุญุธุงุช ุงูุทูุจ:</strong> @Model.OrderNotes
                        </div>
                    }
                    @if (!string.IsNullOrEmpty(Model.ReviewNotes))
                    {
                        <div style="margin-bottom: 10px;">
                            <strong>ููุงุญุธุงุช ุงููุฑุงุฌุนุฉ:</strong> @Model.ReviewNotes
                        </div>
                    }
                    @if (!string.IsNullOrEmpty(Model.ManufacturingNotes))
                    {
                        <div style="margin-bottom: 10px;">
                            <strong>ููุงุญุธุงุช ุงูุชุตููุน:</strong> @Model.ManufacturingNotes
                        </div>
                    }
                </div>
            }

            <!-- Printing Actions -->
            <div style="background: var(--white); padding: 25px; border: 2px solid var(--primary-color); border-radius: var(--border-radius);">
                <h4 style="color: var(--primary-color); margin-bottom: 20px;">๐จ๏ธ ุฅุฌุฑุงุกุงุช ุงูุทุจุงุนุฉ</h4>
                
                @if (!Model.PrintingStartDate.HasValue)
                {
                    <div style="text-align: center; padding: 30px;">
                        <p style="font-size: 16px; margin-bottom: 20px;">ูู ุชุฑูุฏ ุจุฏุก ุงูุทุจุงุนุฉ ุงูุขูุ</p>
                        <form asp-action="StartPrinting" asp-route-id="@Model.Id" method="post">
                            @Html.AntiForgeryToken()
                            <button type="submit" class="btn-success-custom" style="font-size: 18px; padding: 15px 40px;">
                                โถ๏ธ ุจุฏุก ุงูุทุจุงุนุฉ
                            </button>
                        </form>
                    </div>
                }
                else
                {
                    <div style="padding: 20px; background: var(--success-color); color: var(--white); border-radius: var(--border-radius); margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">โ ุงูุทุจุงุนุฉ ููุฏ ุงูุชูููุฐ</div>
                        <div>ุจุฏุฃุช ูู: @Model.PrintingStartDate.Value.ToString("dd/MM/yyyy HH:mm")</div>
                    </div>

                    @if (!Model.PrintingEndDate.HasValue)
                    {
                        <div style="text-align: center; padding: 20px;">
                            <p style="font-size: 16px; margin-bottom: 20px;">ูู ุงูุชููุช ุนูููุฉ ุงูุทุจุงุนุฉุ</p>
                            <form asp-action="CompletePrinting" asp-route-id="@Model.Id" method="post">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn-primary-custom" style="font-size: 18px; padding: 15px 40px;">
                                    โ ุฅููุงู ุงูุทูุจ
                                </button>
                            </form>
                        </div>
                    }
                    else
                    {
                        <div style="padding: 20px; background: var(--success-color); color: var(--white); border-radius: var(--border-radius); text-align: center;">
                            <div style="font-size: 20px; font-weight: bold;">๐ ุชู ุฅููุงู ุงูุทูุจ ุจูุฌุงุญ</div>
                            <div style="margin-top: 5px;">ุงูุชูุช ูู: @Model.PrintingEndDate.Value.ToString("dd/MM/yyyy HH:mm")</div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>
