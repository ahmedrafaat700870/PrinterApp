@model IEnumerable<PrinterApp.Models.ViewModels.CustomerViewModel>

@{
    ViewData["Title"] = "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡";
    var search = ViewBag.Search as string;
}

<div class="content-container">
    <div class="page-header">
        <h2>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
        <a asp-action="Create" class="btn-primary-custom">â• Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</a>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert-custom alert-success-custom">âœ“ @TempData["SuccessMessage"]</div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert-custom alert-error-custom">âœ— @TempData["ErrorMessage"]</div>
    }

    <!-- Search -->
    <div class="card-custom" style="margin-bottom: 20px;">
        <div style="padding: 20px;">
            <form asp-action="Index" method="get">
                <div style="display: flex; gap: 10px;">
                    <input type="text" name="search" value="@search" class="form-control-custom" placeholder="ğŸ” Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„ÙƒÙˆØ¯ØŒ Ø§Ù„Ù‡Ø§ØªÙØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯..." style="flex: 1;" />
                    <button type="submit" class="btn-primary-custom">Ø¨Ø­Ø«</button>
                    @if (!string.IsNullOrEmpty(search))
                    {
                        <a asp-action="Index" class="btn-secondary-custom">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</a>
                    }
                </div>
            </form>
        </div>
    </div>

    <!-- Stats -->
    @if (Model.Any())
    {
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
            <div class="card-custom" style="padding: 20px; text-align: center;">
                <div style="font-size: 32px; font-weight: bold; color: var(--primary-color);">@Model.Count()</div>
                <div style="color: var(--medium-gray); margin-top: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
            </div>
            <div class="card-custom" style="padding: 20px; text-align: center;">
                <div style="font-size: 32px; font-weight: bold; color: var(--success-color);">@Model.Count(c => c.IsActive)</div>
                <div style="color: var(--medium-gray); margin-top: 5px;">Ø¹Ù…Ù„Ø§Ø¡ Ù†Ø´Ø·ÙŠÙ†</div>
            </div>
        </div>
    }

    <!-- Table -->
    @if (Model.Any())
    {
        <div class="card-custom">
            <div style="overflow-x: auto;">
                <table class="table-custom">
                    <thead>
                        <tr>
                            <th>ÙƒÙˆØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                            <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                            <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
                            <th>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th style="text-align: center;">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var customer in Model)
                        {
                            <tr style="@(!customer.IsActive ? "opacity: 0.6;" : "")">
                                <td><strong>@customer.CustomerCode</strong></td>
                                <td>@customer.CustomerName</td>
                                <td>ğŸ“ @customer.Phone</td>
                                <td>@(customer.Email ?? "-")</td>
                                <td>@(customer.City ?? "-")</td>
                                <td>
                                    @if (customer.IsActive)
                                    {
                                        <span style="background: var(--success-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm);">âœ“ Ù†Ø´Ø·</span>
                                    }
                                    else
                                    {
                                        <span style="background: var(--error-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm);">âœ— ØºÙŠØ± Ù†Ø´Ø·</span>
                                    }
                                </td>
                                <td style="text-align: center;">
                                    <div class="action-buttons" style="justify-content: center;">
                                        <a asp-action="Details" asp-route-id="@customer.Id" class="btn-primary-custom btn-sm-custom" title="Ø§Ù„ØªÙØ§ØµÙŠÙ„">ğŸ‘ï¸</a>
                                        <a asp-action="Edit" asp-route-id="@customer.Id" class="btn-warning-custom btn-sm-custom" title="ØªØ¹Ø¯ÙŠÙ„">âœï¸</a>
                                        <form asp-action="ToggleStatus" asp-route-id="@customer.Id" method="post" style="display:inline;">
                                            @Html.AntiForgeryToken()
                                            <button type="submit" class="@(customer.IsActive ? "btn-secondary-custom" : "btn-success-custom") btn-sm-custom">
                                                @(customer.IsActive ? "ğŸ”’" : "âœ“")
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
    else
    {
        <div class="card-custom">
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ‘¥</div>
                <h3 style="color: var(--medium-gray);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡</h3>
                <a asp-action="Create" class="btn-primary-custom" style="margin-top: 20px;">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</a>
            </div>
        </div>
    }
</div>
