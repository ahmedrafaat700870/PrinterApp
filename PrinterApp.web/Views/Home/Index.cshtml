@inject PrinterApp.Services.Interfaces.ILanguageService Lang

@{
    ViewData["Title"] = Lang.GetText("Home");
}

<div class="content-container">
    <div class="text-center" style="margin-bottom: 40px;">
        <h1 class="display-4" style="color: var(--primary-color); margin-bottom: 20px;">
            @Lang.GetText("Welcome")
        </h1>
        <p class="lead" style="color: var(--medium-gray); font-size: 1.2rem;">
            @Lang.GetText("WelcomeMessage")
        </p>
    </div>

    @if (User.Identity?.IsAuthenticated == true)
    {
        <!-- Statistics Dashboard -->
        <div style="margin-bottom: 40px;">
            <h2 style="color: var(--primary-color); margin-bottom: 25px; text-align: center;">
                📊 لوحة المعلومات
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <!-- Total Orders -->
                <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <div class="stat-icon">📦</div>
                    <div class="stat-value">@ViewBag.TotalOrders</div>
                    <div class="stat-label">إجمالي الطلبات</div>
                </div>

                <!-- Print Queue -->
                <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    <div class="stat-icon">🖨️</div>
                    <div class="stat-value">@ViewBag.PrintQueueCount</div>
                    <div class="stat-label">قائمة انتظار الطباعة</div>
                </div>

                <!-- High Priority -->
                <div class="stat-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    <div class="stat-icon">🔥</div>
                    <div class="stat-value">@ViewBag.HighPriorityCount</div>
                    <div class="stat-label">أولوية عالية</div>
                </div>

                <!-- In Printing -->
                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-icon">🔄</div>
                    <div class="stat-value">@ViewBag.InPrintingOrders</div>
                    <div class="stat-label">قيد الطباعة</div>
                </div>

                <!-- Completed -->
                <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                    <div class="stat-icon">✅</div>
                    <div class="stat-value">@ViewBag.CompletedOrders</div>
                    <div class="stat-label">مكتملة</div>
                </div>

                <!-- Late Orders -->
                <div class="stat-card" style="background: linear-gradient(135deg, #f83600 0%, #f9d423 100%);">
                    <div class="stat-icon">⚠️</div>
                    <div class="stat-value">@ViewBag.LateOrders</div>
                    <div class="stat-label">طلبات متأخرة</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions Section -->
        <div style="margin-bottom: 30px;">
            <h2 style="color: var(--primary-color); margin-bottom: 25px; text-align: center;">
                ⚡ إجراءات سريعة
            </h2>
        </div>

        <div style="margin-top: 40px;">
            <div class="dashboard-grid">

                <!-- Machines Card -->
                <a asp-controller="Machines" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">🖨️</div>
                        <h3>@Lang.GetText("Machines")</h3>
                        <p>@Lang.GetText("ManageMachines")</p>
                    </div>
                </a>

                <!-- Mold Shapes Card -->
                <a asp-controller="MoldShapes" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">🔲</div>
                        <h3>@Lang.GetText("MoldShapes")</h3>
                        <p>@Lang.GetText("MoldShapeManagement")</p>
                    </div>
                </a>

                <!-- Molds Card -->
                <a asp-controller="Molds" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">🔷</div>
                        <h3>@Lang.GetText("Molds")</h3>
                        <p>@Lang.GetText("MoldManagement")</p>
                    </div>
                </a>

                <!-- Cores Card -->
                <a asp-controller="Cores" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">🎯</div>
                        <h3>@Lang.GetText("Cores")</h3>
                        <p>@Lang.GetText("ManageCores")</p>
                    </div>
                </a>

                <!-- Cartons Card -->
                <a asp-controller="Cartons" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">📦</div>
                        <h3>@Lang.GetText("Cartons")</h3>
                        <p>@Lang.GetText("ManageCartons")</p>
                    </div>
                </a>

                <!-- Knives Card -->
                <a asp-controller="Knives" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">🔪</div>
                        <h3>@Lang.GetText("Knives")</h3>
                        <p>@Lang.GetText("ManageKnives")</p>
                    </div>
                </a>

                <!-- Suppliers Card -->
                <a asp-controller="Suppliers" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">👥</div>
                        <h3>@Lang.GetText("Suppliers")</h3>
                        <p>@Lang.GetText("ManageSuppliers")</p>
                    </div>
                </a>

                <!-- Raw Materials Card -->
                <a asp-controller="RawMaterials" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">🧱</div>
                        <h3>@Lang.GetText("RawMaterials")</h3>
                        <p>@Lang.GetText("ManageRawMaterials")</p>
                    </div>
                </a>

                <!-- Products Card -->
                <a asp-controller="Products" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">📦</div>
                        <h3>@Lang.GetText("Products")</h3>
                        <p>@Lang.GetText("ManageProducts")</p>
                    </div>
                </a>

                <!-- Manufacturing Additions Card -->
                <a asp-controller="ManufacturingAdditions" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon">⚙️</div>
                        <h3>@Lang.GetText("Additions")</h3>
                        <p>@Lang.GetText("ManageAdditions")</p>
                    </div>
                </a>






                <!-- =====================================================
                الطلبات (Orders)
                ===================================================== -->
                <a asp-controller="Orders" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #4CAF50;">📦</div>
                        <h3>الطلبات</h3>
                        <p>إدارة جميع الطلبات والمراحل المختلفة</p>
                    </div>
                </a>

                <!-- Create New Order -->
                <a asp-controller="Orders" asp-action="Create" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #2196F3;">➕</div>
                        <h3>طلب جديد</h3>
                        <p>إنشاء طلب جديد في النظام</p>
                    </div>
                </a>

                <!-- Review Orders -->
                <a asp-controller="Orders" asp-action="ReviewList" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #00BCD4;">📋</div>
                        <h3>طلبات المراجعة</h3>
                        <p>مراجعة الطلبات الجديدة</p>
                    </div>
                </a>

                <!-- Manufacturing Orders -->
                <a asp-controller="Orders" asp-action="ManufacturingList" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #673AB7;">⚙️</div>
                        <h3>طلبات التصنيع</h3>
                        <p>متابعة عمليات التصنيع</p>
                    </div>
                </a>

                <!-- Printing Orders -->
                <a asp-controller="Orders" asp-action="PrintingList" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #607D8B;">🖨️</div>
                        <h3>طلبات الطباعة</h3>
                        <p>متابعة عمليات الطباعة</p>
                    </div>
                </a>

                <!-- Order Statistics -->
                <a asp-controller="Orders" asp-action="Statistics" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #FF9800;">📊</div>
                        <h3>إحصائيات الطلبات</h3>
                        <p>عرض التقارير والإحصائيات</p>
                    </div>
                </a>

                <!-- Customers -->
                <a asp-controller="Customers" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #E91E63;">👥</div>
                        <h3>العملاء</h3>
                        <p>عرض وإضافة وتعديل العملاء</p>
                    </div>
                </a>

                <!-- =====================================================
                طباعة الطلبات (Print Orders)
                ===================================================== -->
                
                <!-- Print Queue Management -->
                <a asp-controller="PrintOrders" asp-action="PrintQueue" class="dashboard-card-link">
                    <div class="dashboard-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <div class="card-icon" style="font-size: 48px;">🖨️</div>
                        <h3 style="color: white;">قائمة انتظار الطباعة</h3>
                        <p style="color: rgba(255,255,255,0.9);">إدارة أولويات الطباعة والترتيب</p>
                    </div>
                </a>

                <!-- Print Orders List -->
                <a asp-controller="PrintOrders" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                        <div class="card-icon" style="font-size: 48px;">📋</div>
                        <h3 style="color: white;">طلبات الطباعة</h3>
                        <p style="color: rgba(255,255,255,0.9);">عرض جميع طلبات الطباعة</p>
                    </div>
                </a>

                <!-- Priority Management -->
                <a asp-controller="PrintOrders" asp-action="PrintQueue" class="dashboard-card-link">
                    <div class="dashboard-card" style="background: linear-gradient(135deg, #fad0c4 0%, #ffd1ff 100%);">
                        <div class="card-icon" style="font-size: 48px; color: #d63031;">🔢</div>
                        <h3 style="color: #2d3436;">إدارة الأولويات</h3>
                        <p style="color: #636e72;">ترتيب وتنظيم أولويات الطباعة</p>
                    </div>
                </a>

                <!-- Roll Directions -->
                <a asp-controller="RollDirections" asp-action="Index" class="dashboard-card-link">
                    <div class="dashboard-card">
                        <div class="card-icon" style="color: #3498db;">🔄</div>
                        <h3>اتجاهات الرول</h3>
                        <p>إدارة اتجاهات الرول مع الصور</p>
                    </div>
                </a>

            </div>
        </div>
    }
    else
    {
        <div class="login-prompt">
            <div class="card-custom" style="max-width: 500px; margin: 60px auto; text-align: center; padding: 40px;">
                <div style="font-size: 64px; margin-bottom: 20px;">🔒</div>
                <h3 style="color: var(--primary-color); margin-bottom: 15px;">
                    @Lang.GetText("Login")
                </h3>
                <p style="color: var(--medium-gray); margin-bottom: 30px;">
                    @Lang.GetText("PleaseLoginMessage")
                </p>
                <a asp-area="Identity" asp-page="/Account/Login" class="btn-primary-custom" style="padding: 12px 40px; font-size: 16px;">
                    🔑 @Lang.GetText("Login")
                </a>
            </div>
        </div>
    }
</div>

<style>
    .stat-card {
        padding: 25px;
        border-radius: 15px;
        color: white;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }

    .stat-card:hover::before {
        transform: translateX(0);
    }

    .stat-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
    }

    .stat-icon {
        font-size: 48px;
        margin-bottom: 10px;
        animation: pulse 2s infinite;
    }

    .stat-value {
        font-size: 42px;
        font-weight: bold;
        margin-bottom: 8px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }

    .stat-label {
        font-size: 16px;
        font-weight: 500;
        opacity: 0.95;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    @@keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.1);
        }
    }

    .dashboard-card {
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .dashboard-card::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .dashboard-card:hover::after {
        width: 300px;
        height: 300px;
    }

    .dashboard-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .dashboard-card:active {
        transform: translateY(-4px) scale(1.01);
    }

    .card-icon {
        transition: all 0.3s ease;
    }

    .dashboard-card:hover .card-icon {
        transform: scale(1.2) rotate(5deg);
    }

    @@media (max-width: 768px) {
        .stat-card {
            padding: 20px;
        }

        .stat-icon {
            font-size: 36px;
        }

        .stat-value {
            font-size: 32px;
        }

        .stat-label {
            font-size: 14px;
        }
    }
</style>
