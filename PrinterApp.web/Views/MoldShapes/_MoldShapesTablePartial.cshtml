@* @model IEnumerable<PrinterApp.Models.ViewModels.MoldShapeViewModel>
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer

@if (Model.Any())
{
    <table class="table-custom">
        <thead>
            <tr>
                <th style="width: 80px; text-align: center;">@Localizer["ShapeImage"]</th>
                <th>@Localizer["MoldShapeName"]</th>
                <th>@Localizer["Description"]</th>
                <th style="width: 120px; text-align: center;">@Localizer["MoldsCount"]</th>
                <th style="width: 100px;">@Localizer["Status"]</th>
                <th>@Localizer["CreatedDate"]</th>
                <th style="text-align: center; width: 300px;">@Localizer["Actions"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var shape in Model)
            {
                <tr style="@(shape.IsActive ? "" : "opacity: 0.6; background-color: #f5f5f5;")">
                    <td style="text-align: center;">
                        @if (!string.IsNullOrEmpty(shape.ShapeImagePath))
                        {
                            <img src="@shape.ShapeImagePath"
                                 alt="@shape.ShapeName"
                                 style="width: 60px; height: 60px; object-fit: cover; border-radius: var(--border-radius-sm); border: 2px solid var(--border-color); cursor: pointer;"
                                 onclick="showImageModal('@shape.ShapeImagePath', '@shape.ShapeName')" />
                        }
                        else
                        {
                            <div style="width: 60px; height: 60px; background: var(--light-gray); border-radius: var(--border-radius-sm); display: flex; align-items: center; justify-content: center; border: 2px solid var(--border-color);">
                                <span style="font-size: 24px;">🔷</span>
                            </div>
                        }
                    </td>
                    <td>
                        <strong style="color: var(--text-primary);">@shape.ShapeName</strong>
                    </td>
                    <td>
                        @if (!string.IsNullOrEmpty(shape.Description))
                        {
                            <span>@shape.Description</span>
                        }
                        else
                        {
                            <span style="color: var(--medium-gray); font-style: italic;">@Localizer["NoDataAvailable"]</span>
                        }
                    </td>
                    <td style="text-align: center;">
                        <span style="background: var(--info-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm); font-weight: 500;">
                            @shape.MoldsCount
                        </span>
                    </td>
                    <td>
                        @if (shape.IsActive)
                        {
                            <span style="background: var(--success-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm); font-size: 12px; font-weight: 500;">
                                ✓ @Localizer["Active"]
                            </span>
                        }
                        else
                        {
                            <span style="background: var(--danger-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm); font-size: 12px; font-weight: 500;">
                                ✗ @Localizer["Inactive"]
                            </span>
                        }
                    </td>
                    <td>@shape.CreatedDate.ToString("MMM dd, yyyy")</td>
                    <td style="text-align: center;">
                        <div class="action-buttons" style="justify-content: center;">
                            <a asp-action="Edit" asp-route-id="@shape.Id" class="btn-warning-custom btn-sm-custom">
                                ✏️ @Localizer["Edit"]
                            </a>

                            <form asp-action="ToggleStatus" asp-route-id="@shape.Id" method="post" style="display:inline;">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="@(shape.IsActive ? "btn-secondary-custom" : "btn-success-custom") btn-sm-custom">
                                    @(shape.IsActive ? "🔒 " + Localizer["Deactivate"] : "✓ " + Localizer["Activate"])
                                </button>
                            </form>

                            @if (shape.MoldsCount == 0)
                            {
                                <form asp-action="Delete" asp-route-id="@shape.Id" method="post" style="display:inline;">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn-danger-custom btn-sm-custom"
                                            onclick="return confirm('@Localizer["DeleteConfirmation"]')">
                                        🗑️ @Localizer["Delete"]
                                    </button>
                                </form>
                            }
                            else
                            {
                                <button type="button"
                                        class="btn-danger-custom btn-sm-custom"
                                        disabled
                                        style="opacity: 0.5; cursor: not-allowed;"
                                        title="Cannot delete - has @shape.MoldsCount associated mold(s)">
                                    🗑️ @Localizer["Delete"]
                                </button>
                            }
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="empty-state">
        <div class="empty-state-icon">🔍</div>
        <h3 style="color: var(--medium-gray);">@Localizer["NoResultsFound"]</h3>
        <p style="color: var(--medium-gray);">Try adjusting your search criteria</p>
    </div>
} *@

@model IEnumerable<PrinterApp.Models.ViewModels.MoldShapeViewModel>

@if (Model.Any())
{
    <table class="table-custom">
        <thead>
            <tr>
                <th style="width: 80px; text-align: center;">@Lang.GetText("ShapeImage")</th>
                <th>@Lang.GetText("MoldShapeName")</th>
                <th>@Lang.GetText("Description")</th>
                <th style="width: 120px; text-align: center;">@Lang.GetText("MoldsCount")</th>
                <th style="width: 100px;">@Lang.GetText("Status")</th>
                <th>@Lang.GetText("CreatedDate")</th>
                <th style="text-align: center; width: 300px;">@Lang.GetText("Actions")</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var shape in Model)
            {
                <tr style="@(shape.IsActive ? "" : "opacity: 0.6; background-color: #f5f5f5;")">
                    <td style="text-align: center;">
                        @if (!string.IsNullOrEmpty(shape.ShapeImagePath))
                        {
                            <img src="@shape.ShapeImagePath"
                                 alt="@shape.ShapeName"
                                 style="width: 60px; height: 60px; object-fit: cover; border-radius: var(--border-radius-sm); border: 2px solid var(--border-color); cursor: pointer;"
                                 onclick="showImageModal('@shape.ShapeImagePath', '@shape.ShapeName')" />
                        }
                        else
                        {
                            <div style="width: 60px; height: 60px; background: var(--light-gray); border-radius: var(--border-radius-sm); display: flex; align-items: center; justify-content: center; border: 2px solid var(--border-color);">
                                <span style="font-size: 24px;">🔷</span>
                            </div>
                        }
                    </td>
                    <td>
                        <strong style="color: var(--text-primary);">@shape.ShapeName</strong>
                    </td>
                    <td>
                        @if (!string.IsNullOrEmpty(shape.Description))
                        {
                            <span>@shape.Description</span>
                        }
                        else
                        {
                            <span style="color: var(--medium-gray); font-style: italic;">@Lang.GetText("NoDescription")</span>
                        }
                    </td>
                    <td style="text-align: center;">
                        <span style="background: var(--info-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm); font-weight: 500;">
                            @shape.MoldsCount
                        </span>
                    </td>
                    <td>
                        @if (shape.IsActive)
                        {
                            <span style="background: var(--success-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm); font-size: 12px; font-weight: 500;">
                                ✓ @Lang.GetText("Active")
                            </span>
                        }
                        else
                        {
                            <span style="background: var(--error-color); color: var(--white); padding: 5px 12px; border-radius: var(--border-radius-sm); font-size: 12px; font-weight: 500;">
                                ✗ @Lang.GetText("Inactive")
                            </span>
                        }
                    </td>
                    <td>@shape.CreatedDate.ToString("MMM dd, yyyy")</td>
                    <td style="text-align: center;">
                        <div class="action-buttons" style="justify-content: center;">
                            <a asp-action="Edit" asp-route-id="@shape.Id" class="btn-warning-custom btn-sm-custom" title="@Lang.GetText("Edit")">
                                ✏️ @Lang.GetText("Edit")
                            </a>

                            <form asp-action="ToggleStatus" asp-route-id="@shape.Id" method="post" style="display:inline;">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="@(shape.IsActive ? "btn-secondary-custom" : "btn-success-custom") btn-sm-custom" title="@(shape.IsActive? Lang.GetText("Deactivate") : Lang.GetText("Activate"))">
                                    @(shape.IsActive ? "🔒 " + Lang.GetText("Deactivate") : "✓ " + Lang.GetText("Activate"))
                                </button>
                            </form>

                            @if (shape.MoldsCount == 0)
                            {
                                <form asp-action="Delete" asp-route-id="@shape.Id" method="post" style="display:inline;">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn-danger-custom btn-sm-custom"
                                            onclick="return confirm('@Lang.GetText("DeleteMoldShapeConfirmation")')"
                                            title="@Lang.GetText("Delete")">
                                        🗑️ @Lang.GetText("Delete")
                                    </button>
                                </form>
                            }
                            else
                            {
                                <button type="button"
                                        class="btn-danger-custom btn-sm-custom"
                                        disabled
                                        style="opacity: 0.5; cursor: not-allowed;"
                                        title="@Lang.GetText("CannotDeleteHasMolds") @shape.MoldsCount @Lang.GetText("Molds").ToLower()">
                                    🗑️ @Lang.GetText("Delete")
                                </button>
                            }
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="empty-state">
        <div class="empty-state-icon">🔍</div>
        <h3 style="color: var(--medium-gray);">@Lang.GetText("NoResultsFound")</h3>
        <p style="color: var(--medium-gray);">@Lang.GetText("TryAdjustingSearch")</p>
    </div>
}